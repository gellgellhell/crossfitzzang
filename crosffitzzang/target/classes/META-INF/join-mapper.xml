<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="JoinMapper">

	<select id="idCheck"
			parameterType="java.lang.String"
			resultType="int">
		select count(mbr_userid) cnt
		from mbr
		where mbr_userid = #{mbr_userid}
	</select>

	<insert id="formSubmit"
			parameterType="kr.co.ict3.join.MbrDTO">
		INSERT INTO mbr (mbr_userid, mbr_pwd, mbr_email, mbr_name
						, mbr_tel, mbr_zipcode, mbr_addr1, mbr_addr2, mbr_join_date)
		VALUES (#{mbr_userid}, #{mbr_pwd}, #{mbr_email}, #{mbr_name}
				, #{mbr_tel}, #{mbr_zipcode}, #{mbr_addr1}, #{mbr_addr2}, now())
		<selectKey resultType="java.lang.String"
					keyProperty="mbr_id" order="AFTER">
			select LAST_INSERT_ID() mbr_id
		</selectKey>
	</insert>

	<select id="login"
			parameterType="kr.co.ict3.join.MbrDTO"
			resultType="int">
		SELECT mbr_id
		FROM mbr
		WHERE mbr_userid = #{mbr_userid}
		AND mbr_pwd = #{mbr_pwd}
	</select>
	<update id = "updatembrinfo">
		UPDATE mbr SET
		mbr_pwd = #{mbr_pwd}, mbr_tel = #{mbr_tel}, mbr_email = #{mbr_email}, mbr_name = #{mbr_name}
		, mbr_tel = #{mbr_tel}, mbr_zipcode = #{mbr_zipcode}, mbr_addr1 = #{mbr_addr1}, mbr_addr2 = #{mbr_addr2}
		WHERE mbr_userid = #{mbr_userid} 
		AND mbr_pwd = #{mbr_pwd}
	
	</update>



	<select id="pwdCheck"
			parameterType="kr.co.ict3.join.MbrDTO"
			resultType="int">
		SELECT count(mbr_id) cnt
		FROM mbr
		WHERE mbr_userid = #{mbr_userid}
		AND mbr_pwd = #{mbr_pwd}
	</select>
	
</mapper>









